{% extends "base.html" %}
{% block title %}ะกะฟะธัะพะบ ะฟะพะปัะทะพะฒะฐัะตะปะตะน{% endblock %}
{% block content %}
<div class="header">
    <h2>๐ฅ ะกะฟะธัะพะบ ะฟะพะปัะทะพะฒะฐัะตะปะตะน ({{ users.count }})</h2>
    <div>
        <a href="{% url 'create_profile' %}" class="btn">โ ะะพะฑะฐะฒะธัั ะฟะพะปัะทะพะฒะฐัะตะปั</a>
        <a href="{% url 'sort_users_default' %}" class="btn btn-info">๐ ะกะพััะธัะพะฒะบะฐ</a>
    </div>
</div>

{% if users %}
    {% for user in users %}
    <div class="user-card">
        <h3>{{ user.name }}</h3>
        <div class="user-info">
            <strong>๐ง Email:</strong> {{ user.email }}
        </div>
        <div class="user-info">
            <strong>๐ฑ ะขะตะปะตัะพะฝ:</strong> {{ user.phone }}
        </div>
        <div class="user-info">
            <strong>๐ ะะพะทัะฐัั:</strong> {{ user.age }} ะปะตั
        </div>
        <div class="user-info">
            <strong>๐ ะกะพะทะดะฐะฝ:</strong> {{ user.created_at|date:"d.m.Y H:i" }}
        </div>
        
        <div class="actions">
            <a href="{% url 'user_profile' user.id %}" class="btn btn-success">๐๏ธ ะัะพัะผะพัั</a>
            <a href="{% url 'edit_profile' user.id %}" class="btn">โ๏ธ ะะตะดะฐะบัะธัะพะฒะฐัั</a>
            <form method="post" action="{% url 'delete_user' user.id %}" style="display: inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger">๐๏ธ ะฃะดะฐะปะธัั</button>
            </form>
        </div>
    </div>
    {% endfor %}
{% else %}
    <div class="user-card">
        <h3>๐ ะะพะบะฐ ะฝะตั ะฟะพะปัะทะพะฒะฐัะตะปะตะน</h3>
        <p>ะกะพะทะดะฐะนัะต ะฟะตัะฒะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ ัะธััะตะผะต!</p>
        <a href="{% url 'create_profile' %}" class="btn">โ ะะพะฑะฐะฒะธัั ะฟะพะปัะทะพะฒะฐัะตะปั</a>
    </div>
{% endif %}

<script>
// ะะฝัะตัะฐะบัะธะฒะฝะพััั ะดะปั ัะฟะธัะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปะตะน
document.addEventListener('DOMContentLoaded', function() {
    const userCards = document.querySelectorAll('.user-card');
    
    userCards.forEach((card, index) => {
        setTimeout(() => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            card.style.transition = 'all 0.5s ease';
            
            setTimeout(() => {
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, 100);
        }, index * 100);
    });
    
    // ะกัะตััะธะบ ะฟะพะปัะทะพะฒะฐัะตะปะตะน ั ะฐะฝะธะผะฐัะธะตะน
    const userCount = {{ users.count }};
    if (userCount > 0) {
        setTimeout(() => {
            alert(`๐ ะัะปะธัะฝะพ! ะฃ ะฒะฐั ัะถะต ${userCount} ะฟะพะปัะทะพะฒะฐัะตะปั${userCount === 1 ? '' : userCount < 5 ? 'ะฐ' : 'ะตะน'} ะฒ ัะธััะตะผะต!\n\nะฅะพัะธัะต ะพััะพััะธัะพะฒะฐัั ะธั?`);
        }, 3000);
    }
});
</script>
{% endblock %}